<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nexus Zenith | Singularity</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --bg: #020205; --glass: rgba(15, 15, 25, 0.7); --border: rgba(255, 255, 255, 0.1);
            --primary: #00f2ff; --secondary: #7000ff; --accent: #ff0055;
            --glow: 0 0 20px rgba(0, 242, 255, 0.3);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Space Grotesk', sans-serif; }
        body { background: var(--bg); color: #fff; overflow-x: hidden; scroll-behavior: smooth; }

        /* --- NEURAL LAUNCH INTERFACE --- */
        #launch-gate {
            position: fixed; inset: 0; z-index: 5000; background: var(--bg);
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: 1s cubic-bezier(0.8, 0, 0.2, 1);
        }
        .gate-ring {
            position: absolute; width: 400px; height: 400px; border: 2px solid var(--primary);
            border-radius: 50%; opacity: 0.2; animation: pulse 4s infinite;
        }
        .gate-label { font-size: 5rem; font-weight: 900; letter-spacing: -5px; z-index: 10; }
        .gate-label span { color: var(--primary); text-shadow: var(--glow); }

        /* --- MAIN WORKSPACE --- */
        #os-interface { display: none; opacity: 0; padding: 40px 20px; transition: 1.5s; }
        .grid-engine { 
            display: grid; grid-template-columns: 1fr 3fr; gap: 25px; max-width: 1700px; margin: 0 auto; 
        }

        .sidebar { display: flex; flex-direction: column; gap: 20px; }
        .panel { 
            background: var(--glass); backdrop-filter: blur(15px); border: 1px solid var(--border);
            padding: 30px; border-radius: 30px; box-shadow: var(--glow);
        }
        
        textarea { 
            width: 100%; height: 180px; background: transparent; border: none; 
            color: var(--primary); font-size: 1.1rem; outline: none; resize: none; font-family: 'Fira Code', monospace;
        }

        .stats-matrix { 
            display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px; 
        }
        .node { 
            background: rgba(255,255,255,0.03); border: 1px solid var(--border); padding: 20px; 
            border-radius: 20px; cursor: help; position: relative; transition: 0.4s;
        }
        .node:hover { background: rgba(0, 242, 255, 0.05); border-color: var(--primary); }
        .node label { font-size: 0.65rem; color: #888; text-transform: uppercase; letter-spacing: 2px; }
        .node .val { font-size: 1.6rem; font-weight: 800; display: block; margin-top: 5px; }

        /* --- ADVANCED GRAPHING --- */
        .viz-center { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .chart-card { background: var(--glass); border: 1px solid var(--border); border-radius: 30px; padding: 25px; height: 450px; }

        .btn { 
            padding: 15px 30px; border-radius: 15px; border: 1px solid var(--primary); 
            background: transparent; color: var(--primary); cursor: pointer; font-weight: 700;
            text-transform: uppercase; letter-spacing: 1px; transition: 0.3s;
        }
        .btn:hover { background: var(--primary); color: #000; box-shadow: var(--glow); }

        @keyframes pulse { 0% { transform: scale(0.8); opacity: 0.1; } 50% { opacity: 0.3; } 100% { transform: scale(1.3); opacity: 0; } }
    </style>
</head>
<body>

<div id="launch-gate">
    <div class="gate-ring"></div>
    <div class="gate-label">NEXUS<span>ZENITH</span></div>
    <p style="color: #666; margin: 20px 0 40px;">v11.0 Singularity Edition | Neural Analytics Platform</p>
    <button class="btn" onclick="ignite()">Ignite OS</button>
</div>

<div id="os-interface">
    <div class="grid-engine">
        <div class="sidebar">
            <div class="panel">
                <h3>Neural Input</h3>
                <textarea id="mainInput" placeholder="Paste data stream..."></textarea>
                <div style="display:flex; gap:10px; margin-top:20px;">
                    <button class="btn" style="flex:1" onclick="gen(500)">Stress 500</button>
                </div>
            </div>
            <div class="panel">
                <h3>Trend Forecast</h3>
                <p id="forecast" style="color: var(--primary); font-size: 0.9rem;">Waiting for data sync...</p>
            </div>
        </div>

        <div class="main-content">
            <div class="stats-matrix" id="statsDisplay" style="margin-bottom:25px;"></div>
            
            <div class="viz-center">
                <div class="chart-card"><canvas id="densityChart"></canvas></div>
                <div class="chart-card"><canvas id="volatilityChart"></canvas></div>
                <div class="chart-card"><canvas id="zScoreChart"></canvas></div>
                <div class="chart-card"><canvas id="predictionChart"></canvas></div>
            </div>
        </div>
    </div>
</div>

<script>
    let activeCharts = [];

    function ignite() {
        document.getElementById('launch-gate').style.transform = 'translateY(-100%)';
        setTimeout(() => {
            const os = document.getElementById('os-interface');
            os.style.display = 'block';
            setTimeout(() => os.style.opacity = '1', 100);
        }, 800);
    }

    const input = document.getElementById('mainInput');
    input.addEventListener('input', () => {
        clearTimeout(window.syncTimer);
        window.syncTimer = setTimeout(runSingularity, 1000);
    });

    function gen(n) {
        input.value = Array.from({length:n}, () => (Math.random()*1000).toFixed(2)).join(', ');
        runSingularity();
    }

    function runSingularity() {
        const data = input.value.replace(/[^\d.-]/g, ' ').trim().split(/\s+/).map(Number).filter(n => !isNaN(n));
        if (data.length < 5) return;

        const n = data.length, sorted = [...data].sort((a,b)=>a-b);
        const sum = data.reduce((a,b)=>a+b, 0), mean = sum/n;
        const vari = data.reduce((a,b)=>a+Math.pow(b-mean,2),0)/(n-1), std = Math.sqrt(vari);
        
        // --- PREDICTIVE TREND (Linear Regression) ---
        let xSum=0, ySum=0, xySum=0, x2Sum=0;
        data.forEach((y, x) => { xSum += x; ySum += y; xySum += x*y; x2Sum += x*x; });
        const slope = (n*xySum - xSum*ySum) / (n*x2Sum - xSum*xSum);
        const intercept = (ySum - slope*xSum) / n;
        
        const metrics = [
            {l: 'Mean', v: mean.toFixed(2)}, {l: 'Median', v: (n%2==0?(sorted[n/2-1]+sorted[n/2])/2:sorted[Math.floor(n/2)]).toFixed(2)},
            {l: 'Std Dev', v: std.toFixed(2)}, {l: 'Variance', v: vari.toFixed(2)},
            {l: 'Range', v: (sorted[n-1]-sorted[0]).toFixed(2)}, {l: 'IQR', v: (sorted[Math.floor(n*0.75)]-sorted[Math.floor(n*0.25)]).toFixed(2)},
            {l: 'Trend Slope', v: slope.toFixed(4)}, {l: 'Skewness', v: ((data.reduce((a,b)=>a+Math.pow(b-mean,3),0)/n)/Math.pow(std,3)).toFixed(3)}
        ];

        document.getElementById('statsDisplay').innerHTML = metrics.map(m => `
            <div class="node"><label>${m.l}</label><span class="val">${m.v}</span></div>
        `).join('');

        document.getElementById('forecast').innerText = slope > 0 ? "Forecast: Bullish Growth Detected" : "Forecast: Regression/Bearish Drift";

        updateCharts(data, sorted, mean, std, slope, intercept);
    }

    function updateCharts(data, sorted, mean, std, slope, intercept) {
        activeCharts.forEach(c => c.destroy()); activeCharts = [];
        const baseOpt = { responsive: true, maintainAspectRatio: false, scales: { x: { grid: { color: 'rgba(255,255,255,0.05)' } }, y: { grid: { color: 'rgba(255,255,255,0.05)' } } } };

        // 1. Density Curve
        activeCharts.push(new Chart(document.getElementById('densityChart'), {
            type:'line', data:{ labels:sorted.map((_,i)=>i), datasets:[{ label: 'Distribution', data:sorted, borderColor: '#00f2ff', fill: true, backgroundColor: 'rgba(0, 242, 255, 0.1)', pointRadius:0 }] }, options: baseOpt
        }));

        // 2. Z-Score Heatmap (Relative Scale)
        const zScores = data.map(v => (v - mean) / std);
        activeCharts.push(new Chart(document.getElementById('zScoreChart'), {
            type:'bar', data:{ labels:zScores.map((_,i)=>i), datasets:[{ label: 'Z-Score Intensity', data:zScores, backgroundColor: zScores.map(z => z > 0 ? '#00f2ff' : '#ff0055') }] }, options: baseOpt
        }));

        // 3. Regression Prediction
        const predLine = data.map((_, x) => slope * x + intercept);
        activeCharts.push(new Chart(document.getElementById('predictionChart'), {
            type:'line', data:{ labels:data.map((_,i)=>i), datasets:[
                { label: 'Actual', data: data, borderColor: 'rgba(255,255,255,0.2)', type: 'scatter' },
                { label: 'Prediction', data: predLine, borderColor: '#7000ff', borderDash: [5,5], pointRadius:0 }
            ]}, options: baseOpt
        }));

        // 4. Volatility Index
        activeCharts.push(new Chart(document.getElementById('volatilityChart'), {
            type:'radar', data:{ labels:['Stability','Growth','Outliers','Volume','Spread'], datasets:[{ data:[100-(std/mean*100), slope*100, data.filter(v=>Math.abs(v-mean)>std*2).length*10, data.length/10, (sorted[n-1]-sorted[0])/10], borderColor: '#ff0055', backgroundColor: 'rgba(255,0,85,0.1)' }] }, options: baseOpt
        }));
    }
</script>
</body>
</html>    
